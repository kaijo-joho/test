/* ========== Glass Nav Drawer（左スライド / 1本線ハンドル） ========== */
:root{
  --nav-drawer-width: 280px;
  --nav-closed-visible: 0px;

  /* ガラス系 */
  --glass-dim: .20; /* ライト時の暗さ */
  --glass-blur: 18px;
  --glass-sat: 120%;

  --glass-panel-bg-1: rgba(245,247,250,.16);
  --glass-panel-bg-2: rgba(245,247,250,.08);
  --glass-panel-border: rgba(255,255,255,.14);
  --glass-panel-shadow: 0 12px 40px rgba(0,0,0,.10);

  --glass-detail-bg-1: rgba(80,86,96,.52);
  --glass-detail-bg-2: rgba(72,78,88,.40);
  --glass-detail-border: rgba(255,255,255,.20);
  --glass-detail-shadow: 0 10px 28px rgba(0,0,0,.18);

  --nav-fg: #111;
  --nav-fg-contrast: #fff;

  /* ★1本線ハンドル */
  --nav-handle-hit: 28px;        /* 当たり判定の幅 */
  --nav-handle-line: 4px;         /* 線の太さ */
  --nav-handle-outset: 16px;      /* 本体右端からの突出量 */
  --nav-handle-hover-shift: 8px;     /* ホバー時に右へ何pxずらすか（ふわっと） */
  --nav-handle-open-opacity: .08;    /* ドロワー開時の線の不透明度（0=見えない） */
  --nav-handle-open-thickness: 2px;  /* 開時の線の太さ（px） */

  --nav-handle-color: rgba(255,255,255,.90); /* ライト：白線 */
}
@media (prefers-color-scheme: dark){
  :root{
    --glass-dim: .34;

    --glass-panel-bg-1: rgba(24,28,34,.17);
    --glass-panel-bg-2: rgba(24,28,34,.10);
    --glass-panel-border: rgba(24,28,34,.08);
    --glass-panel-shadow: 0 14px 44px rgba(0,0,0,.25);

    --glass-detail-bg-1: rgba(36,40,48,.60);
    --glass-detail-bg-2: rgba(36,40,48,.46);
    --glass-detail-border: rgba(255,255,255,.14);
    --glass-detail-shadow: 0 12px 30px rgba(0,0,0,.48);

    --nav-fg: #eef2f7;
    --nav-fg-contrast: #fff;

    /* ★ダーク時の1本線は黒寄り */
    --nav-handle-color: rgba(255,255,255,.60);
  }
}

/* 外枠：閉時は本体をオフスクリーン。ハンドルだけ残す */
#nav-drawer{
  position: fixed;
  top: 0; left: 0;
  width: var(--nav-drawer-width);
  height: 100dvh;
  transform: translateX(calc(-1 * (var(--nav-drawer-width) - var(--nav-closed-visible))));
  transition: transform 280ms ease;
  z-index: 1050;
  pointer-events: auto;
  overflow: visible; /* ハンドルを右に出す */
}
#nav-drawer.is-open{ transform: translateX(0); }

/* 中のガラスパネル */
#nav-drawer .nav-drawer__panel{
  height: 100%;
  color: var(--nav-fg);
  background-image:
    linear-gradient(0deg, rgb(0 0 0 / var(--glass-dim)), rgb(0 0 0 / var(--glass-dim))),
    linear-gradient(135deg, rgb(255 255 255 / .10), rgb(255 255 255 / 0) 40%),
    linear-gradient(315deg, rgb(255 255 255 / .06), rgb(255 255 255 / 0) 50%),
    linear-gradient(135deg, var(--glass-panel-bg-1), var(--glass-panel-bg-2));
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  border-right: 1px solid var(--glass-panel-border);
  box-shadow: var(--glass-panel-shadow);
  overflow-y: auto;
  padding: 14px 12px 18px;
}

/* === 1本線ハンドル（見た目は線のみ） === */
#nav-handle{
  position: absolute;
  top: 50%;
  right: calc(-1 * (var(--nav-handle-outset) + var(--nav-handle-hit)/2));
  transform: translateY(-50%);
  width: var(--nav-handle-hit);
  height: 120px;
  background: transparent;
  border: 0;
  cursor: pointer;
  outline-offset: 4px;
  z-index: 2;
  transform: translateY(-50%) translateX(0);
  transition: transform 220ms cubic-bezier(.2,.7,.2,1), opacity 220ms ease;
  will-change: transform, opacity;
}
#nav-handle::before{
  content: "";
  position: absolute;
  top: 8px; bottom: 8px;
  left: calc(50% - var(--nav-handle-line)/2);
  width: var(--nav-handle-line);
  border-radius: 2px;
  background: var(--nav-handle-color);
  box-shadow: 0 0 0 1px rgba(0,0,0,.18);
  transition: width 160ms ease, opacity 200ms ease, box-shadow 160ms ease;
}
/* ホバーでふわっと右へ */
#nav-handle:hover{
  transform: translateY(-50%) translateX(var(--nav-handle-hover-shift));
}

#nav-handle:hover::before{ width: calc(var(--nav-handle-line) + 1px); opacity: .95; }
#nav-handle:focus-visible{ outline: 3px solid rgba(255,255,255,.55); }
#nav-drawer.is-open #nav-handle::before{ 
  opacity: var(--nav-handle-open-opacity);
  width: var(--nav-handle-open-thickness);
  box-shadow: 0 0 0 1px rgba(0,0,0,.10); /* 縁取りも弱めに */
}
/* 開いていても、ハンドル上にマウスが来たら少しだけ見やすく（任意） */
#nav-drawer.is-open #nav-handle:hover::before{
  opacity: calc(var(--nav-handle-open-opacity) + .18);
}




/* ---------- 中のナビ（details をガラスカードに） ---------- */
#auto-nav details{
  margin: 8px 0 12px;
  border-radius: 10px;
  padding: 6px 6px 2px;
  color: var(--nav-fg-contrast);
  background: linear-gradient(180deg, var(--glass-detail-bg-1), var(--glass-detail-bg-2));
  border: 1px solid var(--glass-detail-border);
  box-shadow: var(--glass-detail-shadow), inset 0 1px 0 rgba(255,255,255,.08);
  backdrop-filter: blur(calc(var(--glass-blur) - 6px)) saturate(calc(var(--glass-sat) + 10%));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) - 6px)) saturate(calc(var(--glass-sat) + 10%));
}
#auto-nav summary{
  font-weight: 700;
  line-height: 1.4;
  cursor: pointer;
  list-style: none;
  color: var(--nav-fg-contrast);
  padding: 4px 6px 2px;
}
#auto-nav summary::-webkit-details-marker{ display: none; }
#auto-nav .nav-list{
  margin: 6px 0 6px 0;
  padding: 0 0 6px 0;
  list-style: none;
}
#auto-nav .nav-list li{ margin: 0; padding: 0; }
#auto-nav .nav-link{
  display: block;
  padding: 8px 10px;
  color: var(--nav-fg-contrast);
  text-decoration: none;
  border-radius: 6px;
  opacity: .96;
  transition: background-color .18s ease, opacity .18s ease;
}
#auto-nav .nav-link:hover{ background: rgba(255,255,255,.10); opacity: 1; }
#auto-nav .nav-link[aria-current="page"]{ background: rgba(255,255,255,.16); font-weight: 800; letter-spacing: .01em; }

/* ぼかし未対応フォールバック */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))){
  #nav-drawer .nav-drawer__panel{ background: rgba(245,247,250,.92); }
  #auto-nav details{ background: rgba(72,78,88,.90); }
}

/* === Drawer Logo（任意） =================================== */
:root{
  --logo-plate-bg: rgba(255,255,255,.82);
  --logo-plate-border: rgba(0,0,0,.08);
}
@media (prefers-color-scheme: dark){
  :root{
    --logo-plate-bg: rgba(255,255,255,.80);
    --logo-plate-border: rgba(255,255,255,.10);
  }
}
#nav-drawer .nav-drawer__logo{
  position: sticky;
  top: 0;
  z-index: 1;
  display: flex;
  justify-content: center;
  padding: 12px 8px 10px;
  margin: 0 0 8px 0;
  background:
    linear-gradient(0deg, rgba(0,0,0,.06), rgba(0,0,0,.06)),
    linear-gradient(135deg, rgb(255 255 255 / .06), rgb(255 255 255 / 0) 50%);
  backdrop-filter: blur(calc(var(--glass-blur) - 6px)) saturate(var(--glass-sat));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) - 6px)) saturate(var(--glass-sat));
  border-bottom: 1px solid var(--glass-panel-border);
  border-radius: 10px;
}
#nav-drawer .nav-drawer__logoLink{
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 10px;
  border-radius: 12px;
}
#nav-drawer .nav-drawer__logoLink::before{
  content: "";
  position: absolute; inset: 0;
  border-radius: inherit;
  background: var(--logo-plate-bg);
  border: 1px solid var(--logo-plate-border);
  box-shadow: 0 2px 10px rgba(0,0,0,.10);
}
#nav-drawer .nav-drawer__logoImg{
  position: relative; z-index: 1;
  display: block;
  width: 120px; height: auto;
  image-rendering: -webkit-optimize-contrast;
}